## MyBatis架构设计

+ **API接口层**
  提供给外部接口使用的API，开发人员通过该接口操作数据库，接口层接受到调用请求就会调用**数据处理层**来完成数据处理
+ **数据处理层**
  主要负责**参数映射**，**sql解析**，**sql执行**与**结果映射**
+ **基础支撑层**
  负责最基础的功能支撑，包括**连接管理**，**事务管理**，**配置加载**和**缓存处理**；



-----

**框架架构讲解**：

+ **加载配置**：配置来源于两个地方，一处是配置文件，一处是Java代码的注解，将SQL的配置信息加载成为一个个`MappedStatement`对象（包括了传入参数映射配置、执行的SQL语句、结果映射配置），存储在内存中



+ **SQL解析**：当API接口层接收到调用请求时，会接收到传入SQL的ID和传入对象（可以是`Map`、`JavaBean`或者基本数据类型），`Mybatis`会根据SQL的ID找到对应的MappedStatement，然后根据传入参数对象对`MappedStatement`进行解析，解析后可以得到最终要执行的SQL语句和参数。

  ​

+ **SQL执行**：将最终得到的SQL和参数拿到数据库进行执行，得到操作数据库的结果



+ **结果映射**：将操作数据库的结果按照映射的配置进行转换，可以转换成`HashMap`、`JavaBean`或者基本数据类型，并将最终结果返回