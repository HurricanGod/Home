# <a name="top">awk</a>





----

## <a name="syntax">语法</a>

**命令格式**： `awk [-F field-separator] 'commands' input-file(s)`

+ `[-F 分隔符]`是可选的，`awk`会根据空格和制表符，将每一行分成若干字段，依次用`$1`、`$2`、`$3`代表第一个字段、第二个字段、第三个字段，**`$0`代表当前行**
+ `$0`、`$1`、`$2`均属于变量，此外`$NF`、`$(NF-1)`...分别代表**最后一个变量**、**倒数第二个变量** ...
+ 



**内置变量**：

+ `FS` —— 字段分隔符
+ `OFS` —— 输出数据的字段分隔符
+ `RS` —— 记录分隔符
+ `ORS` —— 输出字段的行分隔符
+ `NF` —— 字段数
+ `NR` —— 记录数



**案例**：

```sh
# 根据 ":" 把一行分割成多列，打印第1列和倒数第二个列
awk -F ':' '{print $1, $(NF-1)}' demo.txt
```



+ 对列进行求和

  ```sh
  cat data.log | awk '{sum += $1}; END {print sum}'
  ```

  


![图片](https://goss1.cfp.cn/creative/vcg/800/new/VCG211141894767-FHQ.jpg)
