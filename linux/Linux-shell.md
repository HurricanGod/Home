# <a name="top">Shell脚本基础</a>



+ <a href="#groupcmd">**成组命令**</a>


+ <a href="#quotes">**引号**</a>


+ <a href="#variable">**Shell变量**</a>












----

## <a name="groupcmd">**成组命令**</a>



> shell 中可以将若干条命令组合在一起，使其逻辑上为一条命令，组合的方式有两种：花括号{} 和圆括号()

+ `{}`组合命令 
  + {}格式的成组命令语法格式注意点：**左括号{ 后面有个空格，右括号 } 之前有个分号(;)**
  + 在本`shell`内执行命令表，不产生新进程



+ `()`组合命令
  + 左括号`(`**不需要留空格**，右括号前`)` *不需要加分号*
  + `()`里的成组命令是在**新的子shell**内执行，需要创建子进程





<p align="right"><a href="#groupcmd">返回</a>&nbsp |  &nbsp<a href="#top">返回目录</a></p>



----

##  <a name="quotes">**引号**</a>

+ **双引号** —— 双引号括起来的字符均作为普通字符对待(**$**  倒引号**`**  反斜线`\`除外)

  + `$` —— 表示变量替换，用预先指定的变量值代替`$`和变量
  + ` —— 表示命令替换
  + `\` —— 仅当后面的字符是{`$`, `"`, `, `\`, 换行符} 中的一个时，`\`才是转义字符（转义字符告诉shell，只把后面的那个字符当作普通字符处理）

  ```shell
  #!/usr/bin/env bash
  echo "Hello `ls -l`"

  TODAY="`date`"
  # TODAY 为 date 命令执行后替换的结果
  echo "today is $TODAY"
  # 输出样例：today is Sat Aug 25 23:14:57     2018

  # 行尾的 \ 有表示长的输入的作用
  OUT_STR="This is not a new\
          line"
  echo ${OUT_STR}
  # 输出： This is not a new line

  ```

  ​


+ **单引号** —— 单引号括起来的字符都作为普通字符出现

  + **特殊字符也会失去意义**

  ```shell
  # TODAY 为 date 命令执行后替换的结果
  TODAY="`date`"

  # 单引号里的所有字符都没有特殊意义
  echo 'today is $TODAY'

  # 输出：today is $TODAY
  ```

  ​





+ **倒引号** —— 被倒引号括起来的字符串被`shell`解释为**命令行**，执行时`shell`会先执行命令行，并以标准输出结果取代整个倒引号部分

  + 倒引号可以是单条命令或多个命令的组合，**可以嵌套使用，嵌套使用内层必须用反斜线**`(\)`进行转义
  + 转义`\`使用`\\`

  ```sh
  # 倒引号里嵌套命令，内层命令需要使用转义符 \ 进行转义
  OUT_STR="`ls -l \`pwd\``"
  echo ${OUT_STR}
  ```

  ​



<p align="right"><a href="#quotes">返回</a>&nbsp |  &nbsp<a href="#top">返回目录</a></p>



-----

## <a name="variable">**Shell变量**</a>

### 变量赋值形式 

+ `变量名=字符串`（**赋值号两边均没有**`空格 `）
+ 变量名区分大小写，未赋值的变量默认为**空串**
+ 赋给变量的值若包含**空格**、**制表符**、**换行符**，可以使用 `单引号` 或 `双引号` 括起来
+ 引用变量时，若被引用的变量需要出现在长字符串**开头**或**中间**，为避免`shell`把被引用变量视为一个*新变量*，可以使用`{}`将变量名括起来
+ <a href="#groupcmd">**命令替换**</a>





### 引用变量值

+ `$变量名`
+ `${变量名}` —— **推荐**，把变量名和后面的字符串分隔开，避免出现混淆



```shell
name=Hurrican 123
# name 的值为 Hurrican

name="Hurrican 123"
# name 的值为 Hurrican 123
```



**备注**：

+ 一个未明确赋值过的变量是一个**空字符串**



### 数组

+ 显示声明一个数组 —— `declare -a 数组名`
+ 读取数组元素值 —— `${数组名[下标]}`
+ 取**越界的数组元素**将返回**空串**
+ 若不给出数组元素下标，数组名表示下标为0的数组元素 —— `${数组名} => ${数组名[0]}`
+ 可以使用`${数组名[*]}` 或 `${数组名[@]}` 访问数组的所有元素
+ 使用`unset`命令可以取消数组或数组元素的定义



**样例** ：

```sh
# 定义一个数组，名字为 list，值为 {1, 2, 3, 4, 5, 6}
declare -a list=(1, 2, 3, 4, 5, 6)

# 访问下标为0的数组
echo "first element is ${list[0]}"

# 访问整个数组，两种方法等效
echo "list[@] is ${list[@]}"
echo "list[*] is ${list[*]}"

```



### 有效的变量引用表达式



| 表达式  | 说明   |      |
| :--- | :--- | ---- |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |





<p align="right"><a href="#variable">返回</a>&nbsp |  &nbsp<a href="#top">返回目录</a></p>
