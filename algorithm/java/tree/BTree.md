## m阶B树



**特点：**

1. 根节点至少有2个子节点
2. 除根节点、失败节点外，每个节点至少有⌈m/2⌉个子女（即⌈m/2⌉个指针），***最多有m个子女，m-1个关键码***
3. 所有失败节点都位于同一层

B树的搜索时间与B树的阶数m和B树的高度h直接有关。

`失败节点：`是虚拟出来的节点，指向失败节点的指针为空

B树至少是半满的，层数较小而且完全平衡。还有1个重要特点是**B树的节点大小可以和磁盘块大小相同**

```
设q = ⌈m/2⌉,B树各层节点数为：
第1层有1个节点
第2层至少有2个节点
第3层至少有2*q（每个节点至少有⌈m/2⌉个子女，而第2层至少有2个）
第4层至少有2*q*q个节点   
```
 
<br/> 
`缺点：`因为B树最少要保持半满，所以在最坏情况下会浪费50%的空间   

-----

### B树的插入

![B树的插入](https://github.com/HurricanGod/Home/blob/master/img/B%E6%A0%91%E6%8F%92%E5%85%A5.png)



---

### B树删除

![B树的删除](https://github.com/HurricanGod/Home/blob/master/img/B%E6%A0%91%E5%88%A0%E9%99%A4.png)

-----

## B+树

结构定义：

1. 每个节点最多有m棵子树（子节点）
2. 根节点最少有1棵子节点，除根节点外至少有⌈m/2⌉个子节点
3. 有n(**n<=m**)个子节点必有n个关键码
4. 所有叶节点在同一层，关键码按从小到大顺序排列，每个叶节点相互链接在一起
5. 所有非叶节点是叶节点的索引，**关键码与指向子节点的指针构成索引项**



**注意**

B+树的构造一般自下而上，**只有叶节点才存放着对实际数据记录的索引，即记录的实际存储地址**

B+树一般有两个头指针，一个指向B+树的根节点，另一个指向关键码最小的叶节点，B+树可以进行两种搜索运算：

1. 从叶节点开始的顺序搜索
2. 从根节点开始到叶节点自上而下的随机搜索

### B+树的插入过程
![B+树的插入](https://github.com/HurricanGod/Home/blob/master/img/B%2B%E6%A0%91%E6%8F%92%E5%85%A5.png)
